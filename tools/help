#!/usr/local/bin/cbsd
#v10.1.6
globalconf="${workdir}/cbsd.conf";
MYARG=""
MYOPTARG=""
MYDESC="[sys] This help"

if [ "$1" = "--help" ]; then
	echo ${MYDESC}
	exit 0
fi

if [ "$1" = "nodesc" ]; then
	descr=0
	NOCOLOR=1
else
	descr=1
fi

set -e
. ${globalconf}
set +e

. ${workdir}/securecmd

show_help()
{
	# append for module cmd part
	if [ -f "${etcdir}/modules.conf" ]; then
		for i in $( /bin/cat ${etcdir}/modules.conf ); do
			[ ! -f "${moduledir}/${i}/securecmd" ] && continue
			. ${moduledir}/${i}/securecmd
		done
	fi

	for i in ${SECCMD}; do
		if [ ${descr} -eq 0 ]; then
			echo "${i}"
		else
			_cmddesc=$( /usr/local/bin/cbsd ${i} --help |/usr/bin/head -n1 2>/dev/null )
			${XO} ${CBSDXO} --open cbsd_help
			$ECHO "${BOLD}${i} ${MAGENTA} --  ${GREEN}${_cmddesc}${NORMAL}"
#			${XO} ${CBSDXO} "{k:i} {:_cmddesc/%s}\n" ${i} ${_cmddesc}
			${XO} ${CBSDXO} --close cbsd_help
		fi
	done
}

### MAIN
show_help
